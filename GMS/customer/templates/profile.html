{% extends 'customer_base.html' %}
{% load static %}

{% block page_title %}My Profile{% endblock %}
{% block page_subtitle %}
View and manage your account information.
{% endblock %}

{% block content %}

<div class="profile-wrapper">

  <div class="profile-card">

    <!-- PROFILE HEADER -->
    <div class="profile-header">
      <div class="profile-avatar">
        <i class="bi bi-person-fill"></i>
      </div>
      <div>
        <div class="profile-name">{{ user.name }}</div>
        <div class="profile-email">{{ user.email }}</div>
      </div>
    </div>

    <form method="POST">
      {% csrf_token %}

      <!-- ACCOUNT INFORMATION -->
      <div class="section-title">Account Information</div>

      <div class="profile-grid">
        <div>
          <label>Full Name</label>
          {{ form.name }}
          {% if form.name.errors %}
            <div class="form-error">{{ form.name.errors }}</div>
          {% endif %}
        </div>

        <div>
          <label>Email</label>
          {{ form.email }}
          {% if form.email.errors %}
            <div class="form-error">{{ form.email.errors }}</div>
          {% endif %}
        </div>

        <div>
          <label>Phone</label>
          {{ form.phone }}
          {% if form.phone.errors %}
            <div class="form-error">{{ form.phone.errors }}</div>
          {% endif %}
        </div>

        <div>
          <label>Address</label>
          {{ form.address }}
          {% if form.address.errors %}
            <div class="form-error">{{ form.address.errors }}</div>
          {% endif %}
        </div>
      </div>

      {% comment %} <button type="submit" class="profile-btn">
        Save Changes
      </button> {% endcomment %}

      <div class="profile-divider"></div>

      <!-- PASSWORD SECTION -->
      <div class="section-title">
        Change Password (Optional)
      </div>

      <div class="profile-grid">
        <div>
          <label>New Password</label>
          {{ form.new_password1 }}
          <small class="helper-text">Leave blank to keep current password</small>
          {% if form.new_password1.errors %}
            <div class="form-error">{{ form.new_password1.errors }}</div>
          {% endif %}
        </div>

        <div>
          <label>Confirm Password</label>
          {{ form.new_password2 }}
          <small class="helper-text">Re-enter your new password</small>
          {% if form.new_password2.errors %}
            <div class="form-error">{{ form.new_password2.errors }}</div>
          {% endif %}
        </div>
      </div>

      {% if form.non_field_errors %}
        <div class="form-error mt-2">
          {{ form.non_field_errors }}
        </div>
      {% endif %}

      {% comment %} <div class="password-info">
        <strong>Password Requirements:</strong>
        <ul>
          <li>At least 8 characters long</li>
          <li>Cannot be too common</li>
          <li>Should not be entirely numeric</li>
        </ul>
      </div> {% endcomment %}

      <button type="submit" class="profile-btn mt-3">
        Save Changes
      </button>

    </form>

  </div>

</div>

{% endblock %}