{% extends "customer_base.html" %}

{% block page_title %}My Appointments{% endblock %}
{% block page_subtitle %}View all your booked services{% endblock %}

{% block content %}
<div class="container py-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="fw-bold mb-0">Appointments</h4>
    <a href="{% url 'create_appointment' %}" class="btn fw-semibold rounded-3"
       style="background:#e6b325; border:none;">
      + Book New Appointment
    </a>
  </div>

  <div class="card shadow-sm border-0 rounded-4">
    <div class="card-body p-0">

      <div class="table-responsive">
        <table class="table align-middle mb-0">
          <thead class="table-light">
            <tr>
              <th class="ps-4">Vehicle</th>
              <th>Service</th>
              <th>Date</th>
              <th>Time</th>
              <th>Status</th>
              <th class="text-end pe-4">Booked On</th>
            </tr>
          </thead>
          <tbody>
            {% for a in appointments %}
              <tr>
                <td class="ps-4 fw-semibold">
                  {{ a.vehicle.model }} ({{ a.vehicle.plate_no }})
                </td>

                <td>
                  <div class="fw-semibold">{{ a.service.name }}</div>
                  <div class="text-muted small">
                    Rs {{ a.service.price }} â€¢ {{ a.service.duration }} min
                  </div>
                </td>

                <td class="fw-semibold">
                  {{ a.slot.date }}
                </td>

                <td>
                  {{ a.slot.start_time }} - {{ a.slot.end_time }}
                </td>

                <td>
                  {% if a.status == "Pending" %}
                    <span class="badge text-bg-warning text-dark">Pending</span>
                  {% elif a.status == "Confirmed" %}
                    <span class="badge text-bg-primary">Confirmed</span>
                  {% elif a.status == "Completed" %}
                    <span class="badge text-bg-success">Completed</span>
                  {% else %}
                    <span class="badge text-bg-danger">Cancelled</span>
                  {% endif %}
                </td>

                <td class="text-end pe-4 text-muted small">
                  {{ a.created_at|date:"M d, Y" }}
                </td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="6" class="text-center py-4 text-muted">
                  You have no appointments yet.
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

    </div>
  </div>

</div>
{% endblock %}