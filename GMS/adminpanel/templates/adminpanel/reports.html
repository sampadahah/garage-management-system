{% extends "customer_base.html" %}
{% load static %}

{% block page_title %}Reports{% endblock %}
{% block page_subtitle %}Download reports in PDF format{% endblock %}

{% block content %}

<!-- Header -->

<!-- Summary Cards -->
<div class="report-grid">

  <!-- Slots -->
  <div class="report-card">
    <div class="report-card-head">
      <div class="report-head-left">
        <div class="report-icon icon-gold">
          <i class="fas fa-calendar-alt"></i>
        </div>
        <div>
          <div class="report-card-title">Slots Report</div>
          <div class="report-card-sub">Time slots summary</div>
        </div>
      </div>

      <span class="report-chip">PDF</span>
    </div>

    <div class="report-stat">
      <div class="report-number">{{ total_slots }}</div>
      <div class="report-label">Total Slots</div>
    </div>

    <div class="report-meta">
      <div>Booked: <strong>{{ booked_slots }}</strong></div>
      <div>Available: <strong>{{ available_slots }}</strong></div>
      <div>Utilization: <strong>{{ utilization }}%</strong></div>
    </div>

    <div class="report-actions">
      <a href="{% url 'adminpanel:download_slots_report_pdf' %}" class="btn btn-gold btn-full">
        <i class="fas fa-file-pdf"></i> Download PDF
      </a>
    </div>
  </div>


  <!-- Customers -->
  <div class="report-card">
    <div class="report-card-head">
      <div class="report-head-left">
        <div class="report-icon icon-blue">
          <i class="fas fa-users"></i>
        </div>
        <div>
          <div class="report-card-title">Customers Report</div>
          <div class="report-card-sub">Registered customer details</div>
        </div>
      </div>

      <span class="report-chip">PDF</span>
    </div>

    <div class="report-stat">
      <div class="report-number">{{ total_customers }}</div>
      <div class="report-label">Total Customers</div>
    </div>

    <div class="report-meta">
      <div>Mechanics: <strong>{{ total_mechanics }}</strong></div>
    </div>

    <div class="report-actions">
      <a href="{% url 'adminpanel:download_customers_report_pdf' %}" class="btn btn-gold btn-full">
        <i class="fas fa-file-pdf"></i> Download PDF
      </a>
    </div>
  </div>


  <!-- Appointments -->
  <div class="report-card">
    <div class="report-card-head">
      <div class="report-head-left">
        <div class="report-icon icon-red">
          <i class="fas fa-calendar-check"></i>
        </div>
        <div>
          <div class="report-card-title">Appointments Report</div>
          <div class="report-card-sub">Bookings status overview</div>
        </div>
      </div>

      <span class="report-chip">PDF</span>
    </div>

    <div class="report-stat">
      <div class="report-number">{{ total_appointments }}</div>
      <div class="report-label">Total Appointments</div>
    </div>

    <div class="report-meta report-meta-2col">
      <div>Pending: <strong>{{ appointment_status.pending }}</strong></div>
      <div>Confirmed: <strong>{{ appointment_status.confirmed }}</strong></div>
      <div>Completed: <strong>{{ appointment_status.completed }}</strong></div>
      <div>Cancelled: <strong>{{ appointment_status.cancelled }}</strong></div>
    </div>

    <div class="report-actions">
      <a href="{% url 'adminpanel:download_appointments_report_pdf' %}" class="btn btn-gold btn-full">
        <i class="fas fa-file-pdf"></i> Download PDF
      </a>
    </div>
  </div>

</div>


<!-- Details -->
<div class="card card-xl mt-18">
  <div class="card-body">

    <div class="section-head">
      <div>
        <h3 class="section-title">Report Details</h3>
        <p class="section-subtitle">See whatâ€™s included in each PDF before downloading.</p>
      </div>
    </div>

    <div class="table-wrap">
      <table class="table-ui">
        <thead>
          <tr>
            <th>Report Name</th>
            <th>Description</th>
            <th>Includes</th>
            <th style="width:220px;">Action</th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td class="td-strong">Slots Report</td>
            <td class="td-muted">Complete list of all time slots</td>
            <td class="td-muted">Date, Time, Status, Created At</td>
            <td>
              <div class="action-cell">
                <a href="{% url 'adminpanel:download_slots_report_pdf' %}" class="btn btn-soft btn-full">
                  <i class="fas fa-file-pdf"></i> Download PDF
                </a>
              </div>
            </td>
          </tr>

          <tr>
            <td class="td-strong">Customers Report</td>
            <td class="td-muted">All registered customers information</td>
            <td class="td-muted">Name, Email, Phone, Address, Verified, Status</td>
            <td>
              <div class="action-cell">
                <a href="{% url 'adminpanel:download_customers_report_pdf' %}" class="btn btn-soft btn-full">
                  <i class="fas fa-file-pdf"></i> Download PDF
                </a>
              </div>
            </td>
          </tr>

          <tr>
            <td class="td-strong">Appointments Report</td>
            <td class="td-muted">All booked appointments details</td>
            <td class="td-muted">Customer, Vehicle, Slot Date/Time, Status, Booked At</td>
            <td>
              <div class="action-cell">
                <a href="{% url 'adminpanel:download_appointments_report_pdf' %}" class="btn btn-soft btn-full">
                  <i class="fas fa-file-pdf"></i> Download PDF
                </a>

                
              </div>
            </td>
          </tr>

        </tbody>
      </table>
    </div>

  </div>
</div>

{% endblock %}